<strong>생산자 - 소비자 문제 정의</strong><br/><br/><br/>
두 협력 프로세스 사이에 버퍼를 두고 생산자와 소비자의 상황을 다루는 문제<br/><br/>
생산자 : 데이터를 넣는 프로세스<br/>
소비자 : 데이터를 꺼내는 프로세스 <br/><br/><br/>

생산자 - 소비자 문제 조건<br/><br/><br/>
버퍼에 여러 프로세스가 동시에 접근할 수 없음 <br/>
버퍼에 데이터를 넣는 동안에는 데이터를 꺼낼 수 없음<br/>
버퍼에서 데이터를 꺼내는 동안에는 데이터를 넣을 수 없음 <br/>
상호배제 필요<br/>
버퍼의 크기가 유한(유한 버퍼 문제)<br/>
버퍼가 가득 찬 경우 생산자는 대기해야 함<br/>
버퍼가 빈 경우 소비자는 대기해야 함 <br/>
동기화 필요<br/>
<br/><br/>

세마포어를 이용한 해결<br/><br/><br/>
상호배제 : 세마포어 mutex<br/>
버퍼에 데이터를 넣고 빼는 부분을 임계영역이라고 함<br/>
초깃값을 1로 두는 이유는 P연산자에서 1만 줄여주고 다음으로 넘어가면 되기 때문<br/><br/>
버퍼가 가득 찬 경우 동기화 : 세마포어 empty<br/>
생산자는 데이터를 넣기전에 데이터를 넣을 수 있는 지 없는지 체크를 해야해서 동기화가 필요하다. 그래서  p(empty)로 체크 후 대기하다가 비워지면 들어간다. 꺼낸다음에도 마찬가지로 v(empty)라는 세마포어로 사용한다.<br/>
초깃값은 n이다.<br/>
n은 버퍼의 크기이다. <br/>
empty는 빈칸이 얼마나 있냐는 의미이다.<br/>
가득차면 empty = 0 이다.<br/>
<br/>
버퍼가 빈 경우 동기화 : 세마포어full(초깃값 0 )<br/>
full 은 가득찬게 몇개가 있느냐..<br/>
full = 0 가득찬게 없다.<br/>
<br/>
3개의 세마포어 : mutex, empty, full (1, n, 0)<br/>
<br/><br/><br/>판독기 - 기록 문제<br/><br/>
판독기-기록기 문제정의<br/>
여러 협력 프로세스 사이에 공유자원을 두고 판독기와 기록기의 상황을 다루는 문제<br/>
판독기 : 데이터를 읽는 프로세스<br/>
기록기 : 데이터를 쓰는 프로세스<br/>
(판독기가 공유자원을 읽는데는 아무 영향을 주지 않으나 기록기는 공유자원의 데이터를 쓰는 거라서 공유자원의 변화가 생길 수 있음)<br/><br/>

판독기- 기록기 문제 조건<br/><br/>
하나의 기록기가 공유자원 데이터를 쓰는 중에는 다른 기록기나 판독기는 공유자원에 접근할 수 없음 <br/>
- 공유자원에서 데이터를 쓰는 동안에는 누구도 접근할 수 없음
- 공유자원에서 데이터를 읽는 동안에는 데이터를 쓸 수 없음<br/>
-> 상호배제 필요<br/>

여러 판독기는 동시에 공유자원에서 데이터를 읽을 수 있음<br/>
- 판독기가 읽는 중 새로운 판독기 읽기 시도-> 가능
- 판독기가 읽는 중 기록기 대기 -> 새로운 판독기 읽기 시도 -> 가능/불가능 <br/>
<br/><br/>
제 1 판독기 - 기록기 문제<br/><br/>
판독기가 공유자원에 접근 중이라면 기록기보다 판독기에 우선순위를 줌<br/>
즉, 새로운 판독기는 즉시 공유자원에 접근 가능<br/>
문제점<br/>
- 기록기의 기아상태 유발 가능<br/>
<br/><br/>

세마포어를 이용한 해결<br/>
상호배제: 세마포어  wrt<br/>
P(wrt) V(wrt)를 통해 임계영역을 유지시켜준다. <br/>
초깃값은 1이다.<br/>
P(wrt)때문에 다른 판독기가 못올 수도 있으므로 판독기 우선 순위를 주기 위해 일반변수 rcount를 도입한다. <br/>
rcount의 초깃값은 0이며, 처음에 1로 증가시켜주고, rcount == 1이면 P연산자를 거치고 , 1이상 (그 이후에 오는 판독기)은 if문 없이 바로 공유자원에서 읽는다<br/>
기록기의 코드에서는 바로 P(wrt)를 거치므로 판독기가 모두 다 읽고 v연산자로 0이 되면 기록기가 공유자원에 쓸 수 있다.<br/>
그러나 판독기가 들어오는 와중에 다른 판독기가 중간에 동시에 들어오면서 rcount가 2가 되는 문제가 생길 수 있다.<br/>
기록기가 쓰고 있는 와중에 판독기가 2개 들어올 수 있으므로
rcount가 있는 if문들에 세마포어 mutex가 들어가서 임계영역을 나누어줘야 한다.<br/>
