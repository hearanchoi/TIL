<strong>생산자 - 소비자 문제 정의</strong><br/><br/><br/>
두 협력 프로세스 사이에 버퍼를 두고 생산자와 소비자의 상황을 다루는 문제<br/><br/>
생산자 : 데이터를 넣는 프로세스<br/>
소비자 : 데이터를 꺼내는 프로세스 <br/><br/><br/>

생산자 - 소비자 문제 조건<br/><br/><br/>
버퍼에 여러 프로세스가 동시에 접근할 수 없음 <br/>
버퍼에 데이터를 넣는 동안에는 데이터를 꺼낼 수 없음<br/>
버퍼에서 데이터를 꺼내는 동안에는 데이터를 넣을 수 없음 <br/>
상호배제 필요<br/>
버퍼의 크기가 유한(유한 버퍼 문제)<br/>
버퍼가 가득 찬 경우 생산자는 대기해야 함<br/>
버퍼가 빈 경우 소비자는 대기해야 함 <br/>
동기화 필요<br/>
<br/><br/>

세마포어를 이용한 해결<br/><br/><br/>
상호배제 : 세마포어 mutex<br/>
버퍼에 데이터를 넣고 빼는 부분을 임계영역이라고 함<br/>
초깃값을 1로 두는 이유는 P연산자에서 1만 줄여주고 다음으로 넘어가면 되기 때문<br/><br/>
버퍼가 가득 찬 경우 동기화 : 세마포어 empty<br/>
생산자는 데이터를 넣기전에 데이터를 넣을 수 있는 지 없는지 체크를 해야해서 동기화가 필요하다. 그래서  p(empty)로 체크 후 대기하다가 비워지면 들어간다. 꺼낸다음에도 마찬가지로 v(empty)라는 세마포어로 사용한다.<br/>
초깃값은 n이다.<br/>
n은 버퍼의 크기이다. <br/>
empty는 빈칸이 얼마나 있냐는 의미이다.<br/>
가득차면 empty = 0 이다.<br/>
<br/>
버퍼가 빈 경우 동기화 : 세마포어full(초깃값 0 )<br/>
full 은 가득찬게 몇개가 있느냐..<br/>
full = 0 가득찬게 없다.<br/>
<br/>
3개의 세마포어 : mutex, empty, full (1, n, 0)<br/>
<br/><br/><br/>판독기 - 기록 문제<br/><br/>
판독기-기록기 문제정의<br/>
여러 협력 프로세스 사이에 공유자원을 두고 판독기와 기록기의 상황을 다루는 문제<br/>
판독기 : 데이터를 읽는 프로세스<br/>
기록기 : 데이터를 쓰는 프로세스<br/>
(판독기가 공유자원을 읽는데는 아무 영향을 주지 않으나 기록기는 공유자원의 데이터를 쓰는 거라서 공유자원의 변화가 생길 수 있음)<br/><br/>

판독기- 기록기 문제 조건<br/><br/>
하나의 기록기가 공유자원 데이터를 쓰는 중에는 다른 기록기나 판독기는 공유자원에 접근할 수 없음 <br/>
- 공유자원에서 데이터를 쓰는 동안에는 누구도 접근할 수 없음
- 공유자원에서 데이터를 읽는 동안에는 데이터를 쓸 수 없음<br/>
-> 상호배제 필요<br/>

여러 판독기는 동시에 공유자원에서 데이터를 읽을 수 있음<br/>
- 판독기가 읽는 중 새로운 판독기 읽기 시도-> 가능
- 판독기가 읽는 중 기록기 대기 -> 새로운 판독기 읽기 시도 -> 가능/불가능 <br/>
<br/><br/>
제 1 판독기 - 기록기 문제<br/><br/>
판독기가 공유자원에 접근 중이라면 기록기보다 판독기에 우선순위를 줌<br/>
즉, 새로운 판독기는 즉시 공유자원에 접근 가능<br/>
문제점<br/>
- 기록기의 기아상태 유발 가능<br/>
<br/><br/>

세마포어를 이용한 해결<br/>
상호배제: 세마포어  wrt<br/>
P(wrt) V(wrt)를 통해 임계영역을 유지시켜준다. <br/>
초깃값은 1이다.<br/>
P(wrt)때문에 다른 판독기가 못올 수도 있으므로 판독기 우선 순위를 주기 위해 일반변수 rcount를 도입한다. <br/>
rcount의 초깃값은 0이며, 처음에 1로 증가시켜주고, rcount == 1이면 P연산자를 거치고 , 1이상 (그 이후에 오는 판독기)은 if문 없이 바로 공유자원에서 읽는다<br/>
기록기의 코드에서는 바로 P(wrt)를 거치므로 판독기가 모두 다 읽고 v연산자로 0이 되면 기록기가 공유자원에 쓸 수 있다.<br/>
그러나 판독기가 들어오는 와중에 다른 판독기가 중간에 동시에 들어오면서 rcount가 2가 되는 문제가 생길 수 있다.<br/>
기록기가 쓰고 있는 와중에 판독기가 2개 들어올 수 있으므로
rcount가 있는 if문들에 세마포어 mutex가 들어가서 임계영역을 나누어줘야 한다.<br/><br/>
제 2 판독기 - 기록기 문제<br/>
판독기가 공유자원에 접근중이라면 판독기보다 기록기에 우선순위를 줌<br/>
즉, 대기 중인 기록기가 있다면 새로운 판독기는 공유자원에 접근 불가능 <br/>
문제점<br/>
판독기의 병행성이 떨어짐<br/>
판독기의 기아상태 유발 가능 <br/><br/>
세마포어를 이용한 해결<br/>
5개의 세마포어<br/> 
rd : 기록기가 들어와 있을 경우 그 이후에 온 판독기들은 대기하게 해줌<br/>
<br/><br/>
프로세스 간 통신 (IPC)<br/>
InterProcess Communication <br/>
병행 프로세스가 데이터를 서로 공유하는 방법 <br/>
공유 메모리 방법과 메시지 전달 방법이 있음 <br/>
하나의 운영체제에서 두 방법 함께 사용 가능<br/><br/>

공유 메모리 방법<br/>
협력 프로세스가 동일한 변수를 사용 (동일한 변수: 공유자원인 메모리 공간 사용)<br/>
예) 생산자 - 소비자 문제의 유한 버퍼<br/>
판독기 - 기록기 문제의 공유 자원 <br/>
대량 데이터 교환  : 고속 통신 가능<br/>
통신상 발생 가능 문제 해결 (응용 프로그래머)<br/><br/>

메시지 전달 방법<br/>
협력 프로세스가 메시지를 주고 받음<br/>
시스템 호출 send(), receive()<br/>
소량 데이터 교환에 적합<br/>
통신상 발생 가능 문제 해결(운영체제)<br/><br/>

메시지 전달방법의 논리적 구조<br/>
통신링크 : 메시지가 지나다니는 통로<br/>
통신링크의 구현 형태<br/>
연결 대상 : 두 프로세스, 셋 이상 프로세스<br/>
두 프로세스 사이 링크 개수 : 하나, 둘 이상<br/>
방향성: 단방향, 양방향<br/>
용량 : 무한, 유한, 0<br/><br/>

통신 링크의 용량<br/>
무한 (송신자는 대기 없음)<br/>
유한 (송신자는 큐가 가득 차면 대기)<br/>
0 (송신자는 수신자가 메시지를 받을 수 있을때까지 대기)<br/><br/>

직접통신<br/>
두 프로세스가 직접 서로를 지정하여 메시지 전달<br/>
오직 하나의 통신 링크가 자동 설정<br/>
하나의 통신 링크는 오직 두 프로세스 사이에만 연관<br/>
통신 링크는 양방향<br/><br/>

대칭형 주소 지정, 비대칭형 주소 지정(변수를 사용)<br/>
수신자가 여러 송신자와 통신 링크를 갖는 경우 사용<br/><br/>

간접 통신<br/>
프로세스 사이에 둔 우편함을 통해 메시지 전달<br/>
같은 우편함을 이용하는 경우 통신 링크가 설정<br/>
여러 우편함을 이용하면 여러 개의 통신 링크 존재<br/>
하나의 통신 링크가 여러 프로세스와 연관 가능 <br/>
통신 링크는 단방향 또는 양방향<br/>

우편함이 수신 프로세스에 소속(수신자가 하나, 통신링크는 단방향, 수신 프로세스가 종료하면 우편함도 사라짐)<br/>
우편함이 운영체제에 소속(수신자 여럿, 한순간에 하나의 수신자만 가능, 운영체제가 수신자 관리, 통신링크는 양방향) <br/>
